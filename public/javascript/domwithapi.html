<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clash Of Clans API</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js" integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ==" crossorigin="anonymous"></script>
</head>
<body>
    <input type="text" id="clantag" name="clantag" value="Insert Clantag Here!">
    <button onclick="sendTag()"> Submit! </button>
    <p id="test"></p>
    <script>
        
        var clantag = 0;
        var inputText = '';
        function sendTag(){

            inputText = document.getElementById("clantag").value;
            document.getElementById("test").innerHTML=inputText;
            clantag=document.getElementById("clantag").value;
            getResults();

        }
        function getResults(){

            let searchtype = 'clans'+'/';
            let apikey= 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiIsImtpZCI6IjI4YTMxOGY3LTAwMDAtYTFlYi03ZmExLTJjNzQzM2M2Y2NhNSJ9.eyJpc3MiOiJzdXBlcmNlbGwiLCJhdWQiOiJzdXBlcmNlbGw6Z2FtZWFwaSIsImp0aSI6IjRkZjA2NmM2LTI1ZTItNGUyNS1hNDYwLWIxMGY5Yzc0MTQ0YiIsImlhdCI6MTYxMTc3MTQzOCwic3ViIjoiZGV2ZWxvcGVyLzc0OWVlYmZhLTcyNDktMzIyYi1mYzM5LTcxNDJlZDQyMGIyMSIsInNjb3BlcyI6WyJjbGFzaCJdLCJsaW1pdHMiOlt7InRpZXIiOiJkZXZlbG9wZXIvc2lsdmVyIiwidHlwZSI6InRocm90dGxpbmcifSx7ImNpZHJzIjpbIjk5LjE5OS4xNTcuMTUwIl0sInR5cGUiOiJjbGllbnQifV19.r2OBxYs6GaFA_ZNOfUaIwTR_uaJV1jKUMLqzT7Nu3lV90pFoipUnngsLyF-r-jcmJz7yvCS4BfbJ1GLw6RmfyQ';
            //let clantag='99992RRP';
            //searching type
            
            let url = "https://api.clashofclans.com/v1/"+searchtype+'%23'+clantag;
            console.log(url);
            //const axios = require('axios');
            //process.env['NODE_TLS_REJECT_UNAUTHORIZED'] = 0;
            axios(url,{
            headers: {
                'Accept': "application/json",
                'Access-Control-Allow-Origin': '*',
                'Authorization': "Bearer "+apikey
                }
            })
            .then(function (response) {
                console.log(response.data);   
            })
            .catch(function (error) {
                console.log(error);
            });

        }

    </script>
</body>
</html>